@model KisiViewModel

<form id="addnewitemfrom" method="post">

    <div class="form-group">
        <label class="form-label">Ad</label>
        <span asp-validation-for="Ad" class="text-danger"></span>
        <input type="text" asp-for="Ad" class="form-control" id="adi" />
    </div>

    <div class="form-group">
        <label class="form-label">Soyad</label>
        <span asp-validation-for="Soyad" class="text-danger"></span>
        <input type="text" asp-for="Soyad" class="form-control" id="soyadi" />
    </div>

    <div class="form-group">
        <label class="form-label">Firma Adı</label>
        <span asp-validation-for="FirmaAdi" class="text-danger"></span>
        <input type="text" asp-for="FirmaAdi" class="form-control" id="firmaadi" />
    </div>

    <div class="form-group">
        <label class="form-label">Telefon</label>
        <span asp-validation-for="Telefon" class="text-danger"></span>
        <input type="tel" asp-for="Telefon" class="form-control" id="telefon" pattern="[0-9]{3}-[0-9]{3}-[0-9]{2}-[0-9]{2}" />
    </div>

    <div class="form-group">
        <label class="form-label">Eposta</label>
        <span asp-validation-for="Eposta" class="text-danger"></span>
        <input type="email" asp-for="Eposta" class="form-control" id="eposta" />
    </div>

    <div class="form-group">
        <label class="form-label">Adres</label>
        <span asp-validation-for="Adres" class="text-danger"></span>
        <input type="text" asp-for="Adres" class="form-control" id="adres" />
    </div>

    <div class="form-group">
        <label class="form-label">Kişi Türü</label>
        @*<span asp-validation-for="Tur" class="text-danger"></span>*@
        @foreach (var item in Model.TumTurler)
        {
                <input type="checkbox" name="SecilenTurler" value="@item.Value" />
                @item.Text
            
        }
    </div>

    <button type="submit" class="btn btn-primary w-100">Kaydet</button>
</form>

<script>
    $(document).ready(function () {
        $('#addnewitemfrom').submit(function (event) {
            event.preventDefault();
            var formdata = $('#addnewitemfrom').serialize();
            console.log("valid öncesi");
            if ($('#addnewitemfrom').valid()) {
                console.log("valid sonrası");
                $.ajax({
                    type: 'POST',
                    url: '/Kisiler/Save',
                    data: formdata,
                    success: function (response) {
                        if (response.success) {
                            if (response.create) {
                                $.gritter.add({
                                    title: "Başarılı",
                                    text: "Ürün başarıyla eklendi.",
                                    class_name: "gritter-success"
                                });
                            }
                            else {
                                $.gritter.add({
                                    title: "Başarılı",
                                    text: "Ürün başarıyla güncellendi.",
                                    class_name: "gritter-success"
                                });
                            }
                            $("#dynamicModal").modal("hide");
                            $("#grid").trigger("reloadGrid");
                        } else {
                            alert("Ürün eklenirken bir hata oluştu.");
                        }
                    },
                    error: function () {
                        alert("Sunucu hatası oluştu");
                    }
                })
            }
        })
    })

</script>
