!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],e):e(jQuery)}(function($){"use strict";var ee={};$.jgrid.extend({editGridRow:function(Y,J){var e=$.jgrid.getRegional(this[0],"edit"),t=this[0].p.styleUI,K=$.jgrid.styleUI[t].formedit,Z=$.jgrid.styleUI[t].common;return J=$.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:Z.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1,html5Check:!1,buttons:[]},e,J||{}),ee[$(this)[0].p.id]=J,this.each(function(){var u=this;if(u.grid&&Y){u.p.savedData={};var h,m,i,e,g=u.p.id,f="FrmGrid_"+g,t="TblGrid_"+g,j="#"+$.jgrid.jqID(t),v={themodal:"editmod"+g,modalhead:"edithd"+g,modalcontent:"editcnt"+g,scrollelm:f},a=!0,d=1,r=0,o="string"==typeof ee[u.p.id].template&&0<ee[u.p.id].template.length,b=$.jgrid.getRegional(this,"errors"),M=(ee[u.p.id].styleUI=u.p.styleUI||"jQueryUI",$.jgrid.isMobile()&&(ee[u.p.id].resize=!1),"new"===Y?(Y="_empty",m="add",J.caption=ee[u.p.id].addCaption):(J.caption=ee[u.p.id].editCaption,m="edit"),J.recreateForm||$(u).data("formProp")&&$.extend(ee[$(this)[0].p.id],$(u).data("formProp")),!0),n=(J.checkOnUpdate&&J.jqModal&&!J.modal&&(M=!1),isNaN(ee[$(this)[0].p.id].dataheight)?ee[$(this)[0].p.id].dataheight:ee[$(this)[0].p.id].dataheight+"px"),s=isNaN(ee[$(this)[0].p.id].datawidth)?ee[$(this)[0].p.id].datawidth:ee[$(this)[0].p.id].datawidth+"px",w=$("<form name='FormPost' id='"+f+"' class='FormGrid' onSubmit='return false;' style='width:"+s+";height:"+n+";'></form>").data("disabled",!1),l=o?(s=ee[$(this)[0].p.id].template,n="",i=n="string"==typeof s?s.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){return'<span id="'+t+'" ></span>'}):n,j):(i=$("<table id='"+t+"' class='EditTable ui-common-table'><tbody></tbody></table>"),j+"_2"),f="#"+$.jgrid.jqID(f);if($(w).append("<div class='FormError "+Z.error+"' style='display:none;'></div>"),$(w).append("<div class='tinfo topinfo'>"+ee[u.p.id].topinfo+"</div>"),$(u.p.colModel).each(function(){var e=this.formoptions;d=Math.max(d,e&&e.colpos||0),r=Math.max(r,e&&e.rowpos||0)}),$(w).append(i),!1!==(a=(a=void 0===(a=$(u).triggerHandler("jqGridAddEditBeforeInitData",[w,m]))?!0:a)&&$.jgrid.isFunction(ee[u.p.id].beforeInitData)?ee[u.p.id].beforeInitData.call(u,w,m):a)){if("_empty"!==Y&&void 0!==u.p.savedRow&&0<u.p.savedRow.length&&$.jgrid.isFunction($.fn.jqGrid.restoreRow))for(e=0;e<u.p.savedRow.length;e++)if(u.p.savedRow[e].id===Y){$(u).jqGrid("restoreRow",Y);break}for(var c,p,D,y,B,q,R,x=Y,_=u,I=i,k=d,C=0,T=[],F=!1,U="",N=1;N<=k;N++)U+="<td class='CaptionTD'></td><td class='DataTD'></td>";"_empty"!==x&&(F=$(_).jqGrid("getInd",x)),$(_.p.colModel).each(function(t){if(c=this.name,p=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,B=p?"style='display:none'":"","cb"!==c&&"subgrid"!==c&&!0===this.editable&&"rn"!==c&&"sc"!==c){if(!1===F)y="";else if(c===_.p.ExpandColumn&&!0===_.p.treeGrid)y=$("td[role='gridcell']",_.rows[F]).eq(t).text();else{try{y=$.unformat.call(_,$("td[role='gridcell']",_.rows[F]).eq(t),{rowId:x,colModel:this},t)}catch(e){y=this.edittype&&"textarea"===this.edittype?$("td[role='gridcell']",_.rows[F]).eq(t).text():$("td[role='gridcell']",_.rows[F]).eq(t).html()}y&&"&nbsp;"!==y&&"&#160;"!==y&&(1!==y.length||160!==y.charCodeAt(0))||(y="")}var e,i=$.extend({},this.editoptions||{},{id:c,name:c,rowId:x,oper:m,module:"form",checkUpdate:ee[u.p.id].checkOnSubmit||ee[u.p.id].checkOnUpdate}),a=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),d=parseInt(a.rowpos,10)||C+1,r=parseInt(2*(parseInt(a.colpos,10)||1),10);"_empty"===x&&i.defaultValue&&(y=$.jgrid.isFunction(i.defaultValue)?i.defaultValue.call(u):i.defaultValue),this.edittype||(this.edittype="text"),u.p.autoencode&&(y=$.jgrid.htmlDecode(y)),q=$.jgrid.createEl.call(u,this.edittype,i,y,!1,$.extend({},$.jgrid.ajaxOptions,_.p.ajaxSelectOptions||{})),"select"===this.edittype&&(y=$(q).val(),"select-multiple"===$(q).get(0).type&&y&&(y=y.join(","))),"checkbox"===this.edittype&&(y=$(q).is(":checked")?$(q).val():$(q).attr("offval")),$(q).addClass("FormElement"),"select"===this.edittype?$(q).addClass(K.selectClass):-1<$.inArray(this.edittype,["text","textarea","password","color","date","datetime","datetime-local","email","month","number","range","search","tel","time","url","week"])&&$(q).addClass(K.inputClass),R=!0,o?(e=$(w).find("#"+c)).length?e.replaceWith(q):R=!1:(D=$(I).find("tr[rowpos="+d+"]"),a.rowabove&&(e=$("<tr><td class='contentinfo' colspan='"+2*k+"'>"+a.rowcontent+"</td></tr>"),$(I).append(e),e[0].rp=d),0===D.length&&(D=$(1<k?"<tr rowpos='"+d+"'></tr>":"<tr "+B+" rowpos='"+d+"'></tr>").addClass("FormData").attr("id","tr_"+c),$(D).append(U),$(I).append(D),D[0].rp=d),$("td",D[0]).eq(r-2).html("<label for='"+c+"' class='"+K.labelClass+"'>"+(void 0===a.label?_.p.colNames[t]:a.label)+"</label>"),$("td",D[0]).eq(r-1).append(a.elmprefix).append(q).append(a.elmsuffix),1<k&&p&&($("td",D[0]).eq(r-2).hide(),$("td",D[0]).eq(r-1).hide())),(ee[u.p.id].checkOnSubmit||ee[u.p.id].checkOnUpdate)&&R&&(u.p.savedData[c]=y),"custom"===this.edittype&&$.jgrid.isFunction(i.custom_value)&&i.custom_value.call(u,$("#"+c,q),"set",y),$.jgrid.bindEv.call(u,q,i),T[C]=t,C++}}),0<C&&(o?(S="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+_.p.id+"_id' value='"+x+"'/>",$(w).append(S)):((S=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*k-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+_.p.id+"_id' value='"+x+"'/></td></tr>"))[0].rp=C+999,$(I).append(S)),(ee[u.p.id].checkOnSubmit||ee[u.p.id].checkOnUpdate)&&(u.p.savedData[_.p.id+"_id"]=x));var G,s="rtl"===u.p.direction,n="<a id='"+(s?"nData":"pData")+"' class='fm-button "+Z.button+"'><span class='"+Z.icon_base+" "+K.icon_prev+"'></span></a>",a="<a id='"+(s?"pData":"nData")+"' class='fm-button "+Z.button+"'><span class='"+Z.icon_base+" "+K.icon_next+"'></span></a>",S="<a id='sData' class='fm-button "+Z.button+"'>"+J.bSubmit+"</a>",O="<a id='cData' class='fm-button "+Z.button+"'>"+J.bCancel+"</a>",P=Array.isArray(ee[u.p.id].buttons)?$.jgrid.buildButtons(ee[u.p.id].buttons,S+O,Z):S+O,P="<table style='height:auto' class='EditTable ui-common-table' id='"+t+"_2'><tbody><tr><td colspan='2'><hr class='"+Z.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(s?a+n:n+a)+"</td><td class='EditButton'>"+P+"</td></tr>",z=(P+="</tbody></table>",0<r&&(G=[],$.each($(i)[0].rows,function(e,t){G[e]=t}),G.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(G,function(e,t){$("tbody",i).append(t)})),J.gbox="#gbox_"+$.jgrid.jqID(g),!1),t=(!0===J.closeOnEscape&&(J.closeOnEscape=!1,z=!0),n=o?($(w).find("#pData").replaceWith(n),$(w).find("#nData").replaceWith(a),$(w).find("#sData").replaceWith(S),$(w).find("#cData").replaceWith(O),$("<div id="+t+"></div>").append(w)):$("<div></div>").append(w).append(P),$(w).append("<div class='binfo topinfo bottominfo'>"+ee[u.p.id].bottominfo+"</div>"),$(".ui-jqgrid").css("font-size")||"11px"),s=($.jgrid.createModal(v,n,ee[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(u.p.id),$("#gbox_"+$.jgrid.jqID(u.p.id))[0],null,{"font-size":t}),s&&($("#pData, #nData",j+"_2").css("float","right"),$(".EditButton",j+"_2").css("text-align","left")),ee[u.p.id].topinfo&&$(".tinfo",f).show(),ee[u.p.id].bottominfo&&$(".binfo",f).show(),P=n=null,$("#"+$.jgrid.jqID(v.themodal)).keydown(function(e){var t=e.target;return!0!==$(f).data("disabled")&&(!0===ee[u.p.id].savekey[0]&&e.which===ee[u.p.id].savekey[1]&&"TEXTAREA"!==t.tagName?($("#sData",j+"_2").trigger("click"),!1):27===e.which?(A()&&z&&$.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:J.gbox,jqm:J.jqModal,onClose:ee[u.p.id].onClose,removemodal:ee[u.p.id].removemodal,formprop:!ee[u.p.id].recreateForm,form:ee[u.p.id].form}),!1):!0===ee[u.p.id].navkeys[0]?"_empty"===$("#id_g",j).val()||(e.which===ee[u.p.id].navkeys[1]?($("#pData",l).trigger("click"),!1):e.which===ee[u.p.id].navkeys[2]?($("#nData",l).trigger("click"),!1):void 0):void 0)}),J.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span","#"+$.jgrid.jqID(v.themodal)).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(v.themodal)).off("click").click(function(){return A()&&$.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[u.p.id].onClose,removemodal:ee[u.p.id].removemodal,formprop:!ee[u.p.id].recreateForm,form:ee[u.p.id].form}),!1})),J.saveicon=$.extend([!0,"left",K.icon_save],J.saveicon),J.closeicon=$.extend([!0,"left",K.icon_close],J.closeicon),!0===J.saveicon[0]&&$("#sData",l).addClass("right"===J.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+Z.icon_base+" "+J.saveicon[2]+"'></span>"),!0===J.closeicon[0]&&$("#cData",l).addClass("right"===J.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+Z.icon_base+" "+J.closeicon[2]+"'></span>"),(ee[u.p.id].checkOnSubmit||ee[u.p.id].checkOnUpdate)&&(S="<a id='sNew' class='fm-button "+Z.button+"' style='z-index:1002'>"+J.bYes+"</a>",a="<a id='nNew' class='fm-button "+Z.button+"' style='z-index:1002;margin-left:5px'>"+J.bNo+"</a>",O="<a id='cNew' class='fm-button "+Z.button+"' style='z-index:1002;margin-left:5px;'>"+J.bExit+"</a>",t=J.zIndex||999,t++,$("#"+v.themodal).append("<div class='"+J.overlayClass+" jqgrid-overlay confirm' style='z-index:"+t+";display:none;position:absolute;'>&#160;</div><div class='confirm ui-jqconfirm "+Z.content+"' style='z-index:"+(1+t)+"'>"+J.saveData+"<br/><br/>"+S+a+O+"</div>"),$("#sNew","#"+$.jgrid.jqID(v.themodal)).click(function(){return V(),$(f).data("disabled",!1),$(".confirm","#"+$.jgrid.jqID(v.themodal)).hide(),!1}),$("#nNew","#"+$.jgrid.jqID(v.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(v.themodal)).hide(),$(f).data("disabled",!1),setTimeout(function(){$(":input:visible",f)[0].focus()},0),!1}),$("#cNew","#"+$.jgrid.jqID(v.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(v.themodal)).hide(),$(f).data("disabled",!1),$.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[u.p.id].onClose,removemodal:ee[u.p.id].removemodal,formprop:!ee[u.p.id].recreateForm,form:ee[u.p.id].form}),!1})),$(u).triggerHandler("jqGridAddEditInitializeForm",[$(f),m]),$.jgrid.isFunction(ee[u.p.id].onInitializeForm)&&ee[u.p.id].onInitializeForm.call(u,$(f),m),"_empty"!==Y&&ee[u.p.id].viewPagerButtons?$("#pData,#nData",l).show():$("#pData,#nData",l).hide(),$(u).triggerHandler("jqGridAddEditBeforeShowForm",[$(f),m]),$.jgrid.isFunction(ee[u.p.id].beforeShowForm)&&ee[u.p.id].beforeShowForm.call(u,$(f),m),X(),$("#"+$.jgrid.jqID(v.themodal)).data("onClose",ee[u.p.id].onClose),$.jgrid.viewModal("#"+$.jgrid.jqID(v.themodal),{gbox:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,overlay:J.overlay,modal:J.modal,overlayClass:J.overlayClass,focusField:J.focusField,onHide:function(e){var t=$("#editmod"+g)[0].style.width,i=$("#editmod"+g)[0].style.height,i=["100%","auto"].includes(i)?i:$.jgrid.floatNum(i,200),t=["100%","auto"].includes(t)?t:$.jgrid.floatNum(t,300);$(u).data("formProp",{top:$.jgrid.floatNum($(e.w).css("top")),left:parseFloat($(e.w).css("left")),width:t,height:i,dataheight:$(f).height(),datawidth:$(f).width()}),e.w.remove(),e.o&&e.o.remove()}}),M||$("."+$.jgrid.jqID(J.overlayClass)).click(function(){return A()&&$.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[u.p.id].onClose,removemodal:ee[u.p.id].removemodal,formprop:!ee[u.p.id].recreateForm,form:ee[u.p.id].form}),!1}),$(".fm-button","#"+$.jgrid.jqID(v.themodal)).hover(function(){$(this).addClass(Z.hover)},function(){$(this).removeClass(Z.hover)}),$("#sData",l).click(function(){return h={},$(".FormError",f).hide(),H(),"_empty"!==h[u.p.id+"_id"]&&!0===J.checkOnSubmit&&L(h,u.p.savedData)?($(f).data("disabled",!0),$(".confirm","#"+$.jgrid.jqID(v.themodal)).show()):V(),!1}),$("#cData",l).click(function(){return A()&&$.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[u.p.id].onClose,removemodal:ee[u.p.id].removemodal,formprop:!ee[u.p.id].recreateForm,form:ee[u.p.id].form}),!1}),$(l).find("[data-index]").each(function(){var t=parseInt($(this).attr("data-index"),10);0<=t&&J.buttons[t].hasOwnProperty("click")&&$(this).on("click",function(e){J.buttons[t].click.call(u,$(f)[0],ee[u.p.id],e)})}),$("#nData",l).click(function(){if(!A())return!1;$(".FormError",f).hide();var e,t=Q();if(t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]){if($(u).triggerHandler("jqGridAddEditClickPgButtons",["next",$(f),t[1][t[0]]]),$.jgrid.isFunction(J.onclickPgButtons)&&void 0!==(e=J.onclickPgButtons.call(u,"next",$(f),t[1][t[0]]))&&!1===e)return!1;if($("#"+$.jgrid.jqID(t[1][t[0]+1])).hasClass(Z.disabled))return!1;E(t[1][t[0]+1],u,f),u.p.multiselect&&ee[u.p.id].editselected||$(u).jqGrid("setSelection",t[1][t[0]+1]),$(u).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",$(f),t[1][t[0]]]),$.jgrid.isFunction(J.afterclickPgButtons)&&J.afterclickPgButtons.call(u,"next",$(f),t[1][t[0]+1]),X(),W(t[0]+1,t)}return!1}),$("#pData",l).click(function(){if(!A())return!1;$(".FormError",f).hide();var e,t=Q();if(-1!==t[0]&&t[1][t[0]-1]){if($(u).triggerHandler("jqGridAddEditClickPgButtons",["prev",$(f),t[1][t[0]]]),$.jgrid.isFunction(J.onclickPgButtons)&&void 0!==(e=J.onclickPgButtons.call(u,"prev",$(f),t[1][t[0]]))&&!1===e)return!1;if($("#"+$.jgrid.jqID(t[1][t[0]-1])).hasClass(Z.disabled))return!1;E(t[1][t[0]-1],u,f),u.p.multiselect&&ee[u.p.id].editselected||$(u).jqGrid("setSelection",t[1][t[0]-1]),$(u).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",$(f),t[1][t[0]]]),$.jgrid.isFunction(J.afterclickPgButtons)&&J.afterclickPgButtons.call(u,"prev",$(f),t[1][t[0]-1]),X(),W(t[0]-1,t)}return!1}),$(u).triggerHandler("jqGridAddEditAfterShowForm",[$(f),m]),$.jgrid.isFunction(ee[u.p.id].afterShowForm)&&ee[u.p.id].afterShowForm.call(u,$(f),m),Q());W(s[0],s),this.refreshEditForm=function(e,t){!(t=void 0===t?!1:t)&&Y!==e||E(e,this,f),t&&(Y=e)}}}function H(){var e,t,a={};for(e in $(j).find(".FormElement").each(function(){var e,t=$(".customelement",this);if(t.length){var t=t[0],i=$(t).attr("name");$.each(u.p.colModel,function(){if(this.name===i&&this.editoptions&&$.jgrid.isFunction(this.editoptions.custom_value)){try{var e=this.editoptions.custom_value.call(u,$("#"+$.jgrid.jqID(i),j),"get");if("#ignoreme#"!==e){if(void 0===crv)throw"e1";h[i]=e}}catch(e){"e1"===e?$.jgrid.info_dialog(b.errcap,"function 'custom_value' "+ee[$(this)[0]].p.msg.novalue,ee[$(this)[0]].p.bClose,{styleUI:ee[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(b.errcap,e.message,ee[$(this)[0]].p.bClose,{styleUI:ee[$(this)[0]].p.styleUI})}return!0}})}else{switch($(this).get(0).type){case"checkbox":$(this).is(":checked")?h[this.name]=$(this).val():(e=$(this).attr("offval"),h[this.name]=e);break;case"select-one":h[this.name]=$(this).val();break;case"select-multiple":h[this.name]=$(this).val(),h[this.name]=h[this.name]?h[this.name].join(","):"";break;case"radio":if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===$(this).attr("offval")?"off":$(this).attr("offval");break;default:h[this.name]=$(this).val()}u.p.autoencode&&(h[this.name]=$.jgrid.htmlEncode(h[this.name]))}}),a)a.hasOwnProperty(e)&&(t=$('input[name="'+e+'"]:checked',j).val(),h[e]=void 0!==t?t:a[e],u.p.autoencode&&(h[e]=$.jgrid.htmlEncode(h[e])))}function E(i,a,d){var r,o,e,t,n,s=0,l=((ee[u.p.id].checkOnSubmit||ee[u.p.id].checkOnUpdate)&&(u.p.savedData={},u.p.savedData[a.p.id+"_id"]=i),a.p.colModel);if("_empty"===i)return $(l).each(function(){r=this.name,n=$.extend({},this.editoptions||{}),(e=$("#"+$.jgrid.jqID(r),d))&&e.length&&null!==e[0]&&(t="","custom"===this.edittype&&$.jgrid.isFunction(n.custom_value)?n.custom_value.call(u,$("#"+r,d),"set",t):n.defaultValue?(t=$.jgrid.isFunction(n.defaultValue)?n.defaultValue.call(u):n.defaultValue,"checkbox"===e[0].type?(n=t.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==n?(e[0].checked=!0,e[0].defaultChecked=!0,e[0].value=t):(e[0].checked=!1,e[0].defaultChecked=!1):e.val(t)):"checkbox"===e[0].type?(e[0].checked=!1,e[0].defaultChecked=!1,t=$(e).attr("offval")):e[0].type&&"select"===e[0].type.slice(0,6)?e[0].selectedIndex=0:e.val(t),!0!==ee[u.p.id].checkOnSubmit&&!ee[u.p.id].checkOnUpdate||(u.p.savedData[r]=t))}),void $("#id_g",d).val(i);var c=$(a).jqGrid("getInd",i,!0);c&&($('td[role="gridcell"]',c).each(function(t){if("cb"!==(r=l[t].name)&&"subgrid"!==r&&"rn"!==r&&!0===l[t].editable&&"sc"!==r){if(r===a.p.ExpandColumn&&!0===a.p.treeGrid)o=$(this).text();else try{o=$.unformat.call(a,$(this),{rowId:i,colModel:l[t]},t)}catch(e){o="textarea"===l[t].edittype?$(this).text():$(this).html()}switch(u.p.autoencode&&(o=$.jgrid.htmlDecode(o)),!0!==ee[u.p.id].checkOnSubmit&&!ee[u.p.id].checkOnUpdate||(u.p.savedData[r]=o),r=$.jgrid.jqID(r),l[t].edittype){case"select":var e=o.split(","),e=$.map(e,function(e){return $.jgrid.trim(e)});$("#"+r+" option",d).each(function(){!(l[t].editoptions.multiple||$.jgrid.trim(o)!==$.jgrid.trim($(this).text())&&e[0]!==$.jgrid.trim($(this).text())&&e[0]!==$.jgrid.trim($(this).val()))||l[t].editoptions.multiple&&(-1<$.inArray($.jgrid.trim($(this).text()),e)||-1<$.inArray($.jgrid.trim($(this).val()),e))?this.selected=!0:this.selected=!1}),!0!==ee[u.p.id].checkOnSubmit&&!ee[u.p.id].checkOnUpdate||(o=$("#"+r,d).val(),l[t].editoptions.multiple&&(o=o.join(",")),u.p.savedData[r]=o);break;case"checkbox":o=String(o),l[t].editoptions&&l[t].editoptions.value?l[t].editoptions.value.split(":")[0]===o?$("#"+r,d)[u.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):$("#"+r,d)[u.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1}):(o=o.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==o?($("#"+r,d)[u.p.useProp?"prop":"attr"]("checked",!0),$("#"+r,d)[u.p.useProp?"prop":"attr"]("defaultChecked",!0)):($("#"+r,d)[u.p.useProp?"prop":"attr"]("checked",!1),$("#"+r,d)[u.p.useProp?"prop":"attr"]("defaultChecked",!1)),!0!==ee[u.p.id].checkOnSubmit&&!ee[u.p.id].checkOnUpdate||(o=$("#"+r,d).is(":checked")?$("#"+r,d).val():$("#"+r,d).attr("offval"),u.p.savedData[r]=o);break;case"custom":try{if(!l[t].editoptions||!$.jgrid.isFunction(l[t].editoptions.custom_value))throw"e1";l[t].editoptions.custom_value.call(u,$("#"+r,d),"set",o)}catch(e){"e1"===e?$.jgrid.info_dialog(b.errcap,"function 'custom_value' "+ee[$(this)[0]].p.msg.nodefined,$.rp_ge[$(this)[0]].p.bClose,{styleUI:ee[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(b.errcap,e.message,$.rp_ge[$(this)[0]].p.bClose,{styleUI:ee[$(this)[0]].p.styleUI})}break;default:("&nbsp;"===o||"&#160;"===o||1===o.length&&160===o.charCodeAt(0))&&(o=""),$("#"+r,d).val(o)}s++}}),0<s&&($("#id_g",j).val(i),!0!==ee[u.p.id].checkOnSubmit&&!ee[u.p.id].checkOnUpdate||(u.p.savedData[a.p.id+"_id"]=i)))}function V(){var d,r,o,e,t,n,i,s=[!0,"",""],a={},l=u.p.prmNames,c=$(u).triggerHandler("jqGridAddEditBeforeCheckValues",[h,$(f),m]);if(c&&"object"==typeof c&&(h=c),$.jgrid.isFunction(ee[u.p.id].beforeCheckValues)&&(c=ee[u.p.id].beforeCheckValues.call(u,h,$(f),m))&&"object"==typeof c&&(h=c),!ee[u.p.id].html5Check||$.jgrid.validateForm(w[0])){for(e in h)if(h.hasOwnProperty(e)&&!1===(s=$.jgrid.checkValues.call(u,h[e],e))[0])break;if($.each(u.p.colModel,function(e,t){t.editoptions&&!0===t.editoptions.NullIfEmpty&&h.hasOwnProperty(t.name)&&""===h[t.name]&&(h[t.name]="null")}),s[0]&&(void 0===(a=$(u).triggerHandler("jqGridAddEditClickSubmit",[ee[u.p.id],h,m]))&&$.jgrid.isFunction(ee[u.p.id].onclickSubmit)&&(a=ee[u.p.id].onclickSubmit.call(u,ee[u.p.id],h,m)||{}),(s=void 0===(s=$(u).triggerHandler("jqGridAddEditBeforeSubmit",[h,$(f),m]))?[!0,"",""]:s)[0]&&$.jgrid.isFunction(ee[u.p.id].beforeSubmit)&&(s=ee[u.p.id].beforeSubmit.call(u,h,$(f),m))),s[0]&&!ee[u.p.id].processing){if(ee[u.p.id].processing=!0,$("#sData",j+"_2").addClass(Z.active),c=ee[u.p.id].url||$(u).jqGrid("getGridParam","editurl"),o=l.oper,r="clientArray"===c||"storage"===c?u.p.keyName:l.id,h[o]="_empty"===$.jgrid.trim(h[u.p.id+"_id"])?l.addoper:l.editoper,(h[o]!==l.addoper||void 0===h[r])&&(h[r]=h[u.p.id+"_id"]),delete h[u.p.id+"_id"],h=$.extend(h,ee[u.p.id].editData,a),!0===u.p.treeGrid)for(t in h[o]===l.addoper&&(n=$(u).jqGrid("getGridParam","selrow"),a="adjacency"===u.p.treeGridModel?u.p.treeReader.parent_id_field:"parent_id",h[a]=n),u.p.treeReader)u.p.treeReader.hasOwnProperty(t)&&(i=u.p.treeReader[t],!h.hasOwnProperty(i)||h[o]===l.addoper&&"parent_id_field"===t||delete h[i]);h[r]=$.jgrid.stripPref(u.p.idPrefix,h[r]);var p=$.extend({url:c,type:ee[u.p.id].mtype,data:$.jgrid.isFunction(ee[u.p.id].serializeEditData)?ee[u.p.id].serializeEditData.call(u,h):h,success:function(e,t,i){if($("#sData",j+"_2").removeClass(Z.active),h[r]=u.p.idPrefix+h[r],300<=i.status&&304!==i.status?(s[0]=!1,s[1]=$(u).triggerHandler("jqGridAddEditErrorTextFormat",[i,m]),$.jgrid.isFunction(ee[u.p.id].errorTextFormat)?s[1]=ee[u.p.id].errorTextFormat.call(u,i,m):s[1]=t+" Status: '"+i.statusText+"'. Error code: "+i.status):(s=void 0===(s=$(u).triggerHandler("jqGridAddEditAfterSubmit",[i,h,m]))?[!0,"",""]:s)[0]&&$.jgrid.isFunction(ee[u.p.id].afterSubmit)&&(s=ee[u.p.id].afterSubmit.call(u,i,h,m)),!1===s[0])$(".FormError",f).html(s[1]),$(".FormError",f).show();else if(u.p.autoencode&&$.each(h,function(e,t){h[e]=$.jgrid.htmlDecode(t)}),h[o]===l.addoper?(s[2]||(s[2]=$.jgrid.randId()),null==h[r]||h[r]===u.p.idPrefix+"_empty"||""===h[r]?h[r]=s[2]:s[2]=h[r],ee[u.p.id].reloadAfterSubmit?$(u).trigger("reloadGrid"):!0===u.p.treeGrid?$(u).jqGrid("addChildNode",s[2],n,h):$(u).jqGrid("addRowData",s[2],h,J.addedrow),ee[u.p.id].closeAfterAdd?(!0!==u.p.treeGrid&&$(u).jqGrid("setSelection",s[2]),$.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[u.p.id].onClose,removemodal:ee[u.p.id].removemodal,formprop:!ee[u.p.id].recreateForm,form:ee[u.p.id].form})):ee[u.p.id].clearAfterAdd&&E("_empty",u,f)):(ee[u.p.id].reloadAfterSubmit?($(u).trigger("reloadGrid"),ee[u.p.id].closeAfterEdit||setTimeout(function(){$(u).jqGrid("setSelection",h[r])},1e3)):!0===u.p.treeGrid?$(u).jqGrid("setTreeRow",h[r],h):$(u).jqGrid("setRowData",h[r],h),ee[u.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[u.p.id].onClose,removemodal:ee[u.p.id].removemodal,formprop:!ee[u.p.id].recreateForm,form:ee[u.p.id].form})),($.jgrid.isFunction(ee[u.p.id].afterComplete)||Object.prototype.hasOwnProperty.call($._data($(u)[0],"events"),"jqGridAddEditAfterComplete"))&&(d=i,setTimeout(function(){$(u).triggerHandler("jqGridAddEditAfterComplete",[d,h,$(f),m]);try{ee[u.p.id].afterComplete.call(u,d,h,$(f),m)}catch(e){}d=null},500)),(ee[u.p.id].checkOnSubmit||ee[u.p.id].checkOnUpdate)&&($(f).data("disabled",!1),"_empty"!==u.p.savedData[u.p.id+"_id"]))for(var a in u.p.savedData)u.p.savedData.hasOwnProperty(a)&&h[a]&&(u.p.savedData[a]=h[a]);ee[u.p.id].processing=!1;try{$(":input:visible",f)[0].focus()}catch(e){}}},$.jgrid.ajaxOptions,ee[u.p.id].ajaxEditOptions);p.url||ee[u.p.id].useDataProxy||($.jgrid.isFunction(u.p.dataProxy)?ee[u.p.id].useDataProxy=!0:(s[0]=!1,s[1]+=" "+b.nourl)),s[0]&&(ee[u.p.id].useDataProxy?!1===(a=void 0===(a=u.p.dataProxy.call(u,p,"set_"+u.p.id))?[!0,""]:a)[0]?(s[0]=!1,s[1]=a[1]||"Error processing the row!"):(p.data.oper===l.addoper&&ee[u.p.id].closeAfterAdd&&$.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[u.p.id].onClose,removemodal:ee[u.p.id].removemodal,formprop:!ee[u.p.id].recreateForm,form:ee[u.p.id].form}),p.data.oper===l.editoper&&ee[u.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(g),jqm:J.jqModal,onClose:ee[u.p.id].onClose,removemodal:ee[u.p.id].removemodal,formprop:!ee[u.p.id].recreateForm,form:ee[u.p.id].form})):"clientArray"===p.url?(ee[u.p.id].reloadAfterSubmit=!1,h=p.data,p.success(h,"",{status:200,statusText:""})):"storage"===p.url?h[o]===l.addoper?("_empty"===h[r]&&(h[r]=""),$(u).jqGrid("addStorageRecord",h).then(function(e){"complete"===e.type&&p.success(h,"",{status:200,statusText:""})}).catch(function(e){$.jgrid.info_dialog("Error",e.target.error.name+" : "+e.target.error.message,"Close")})):h[o]===l.editoper&&$(u).jqGrid("updateStorageRecord",h).then(function(e){"complete"===e.type&&p.success(h,"",{status:200,statusText:""})}).catch(function(e){$.jgrid.info_dialog("Error",e.target.error.name+" : "+e.target.error.message,"Close")}):$.ajax(p))}!1===s[0]&&($(f).scrollTop(0),$(".FormError",f).html(s[1]),$(".FormError",f).show())}}function L(e,t){var i,a=!1;if(!(a=!($.isPlainObject(e)&&$.isPlainObject(t)&&Object.getOwnPropertyNames(e).length===Object.getOwnPropertyNames(t).length)))for(i in t)if(t.hasOwnProperty(i)){if(!e.hasOwnProperty(i)){a=!0;break}if(e[i]!==t[i]){a=!0;break}}return a}function A(){var e=!0;return $(".FormError",f).hide(),ee[u.p.id].checkOnUpdate&&(h={},H(),L(h,u.p.savedData)&&($(f).data("disabled",!0),$(".confirm","#"+v.themodal).show(),e=!1)),e}function W(e,t){var i=t[1].length-1;0===e||void 0!==t[1][e-1]&&$("#"+$.jgrid.jqID(t[1][e-1])).hasClass(Z.disabled)?$("#pData",l).addClass(Z.disabled):$("#pData",l).removeClass(Z.disabled),e===i||void 0!==t[1][e+1]&&$("#"+$.jgrid.jqID(t[1][e+1])).hasClass(Z.disabled)?$("#nData",l).addClass(Z.disabled):$("#nData",l).removeClass(Z.disabled)}function Q(){var e=$(u).jqGrid("getDataIDs"),t=$("#id_g",j).val();if(u.p.multiselect&&ee[u.p.id].editselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==$.inArray(e[a],u.p.selarrrow)&&i.push(e[a]);return[$.inArray(t,i),i]}return[$.inArray(t,e),e]}function X(){if(ee[u.p.id].checkOnSubmit||ee[u.p.id].checkOnUpdate){var e,t,i=[],a={},i=$.map(u.p.savedData,function(e,t){return t});for(e in $(".FormElement",w).each(function(){if(""!==$.jgrid.trim(this.name)&&-1===i.indexOf(this.name)){var e=$(this).val(),t=$(this).get(0).type;if("checkbox"===t)$(this).is(":checked")||(e=$(this).attr("offval"));else if("select-multiple"===t)e=e.join(",");else if("radio"===t){if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===$(this).attr("offval")?"off":$(this).attr("offval")}u.p.savedData[this.name]=e}}),a)a.hasOwnProperty(e)&&(t=$('input[name="'+e+'"]:checked',w).val(),u.p.savedData[e]=void 0!==t?t:a[e])}}})},viewGridRow:function(T,U){var e=$.jgrid.getRegional(this[0],"view"),t=this[0].p.styleUI,N=$.jgrid.styleUI[t].formedit,z=$.jgrid.styleUI[t].common;return U=$.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"auto",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view",buttons:[]},e,U||{}),ee[$(this)[0].p.id]=U,this.each(function(){var r=this;if(r.grid&&T){var a=r.p.id,d="ViewGrid_"+$.jgrid.jqID(a),n="ViewTbl_"+$.jgrid.jqID(a),i="ViewGrid_"+a,e="ViewTbl_"+a,t={themodal:"viewmod"+a,modalhead:"viewhd"+a,modalcontent:"viewcnt"+a,scrollelm:d},o=!0,s=1,l=0,c=(ee[r.p.id].styleUI=r.p.styleUI||"jQueryUI",U.recreateForm||$(r).data("viewProp")&&$.extend(ee[$(this)[0].p.id],$(r).data("viewProp")),isNaN(ee[$(this)[0].p.id].dataheight)?ee[$(this)[0].p.id].dataheight:ee[$(this)[0].p.id].dataheight+"px"),p=isNaN(ee[$(this)[0].p.id].datawidth)?ee[$(this)[0].p.id].datawidth:ee[$(this)[0].p.id].datawidth+"px",p=$("<form name='FormPost' id='"+i+"' class='FormGrid' style='width:"+p+";height:"+c+";'></form>"),u=$("<table id='"+e+"' class='EditTable ViewTable'><tbody></tbody></table>");if($(r.p.colModel).each(function(){var e=this.formoptions;s=Math.max(s,e&&e.colpos||0),l=Math.max(l,e&&e.rowpos||0)}),$(p).append(u),!1!==(o=(o=void 0===(o=$(r).triggerHandler("jqGridViewRowBeforeInitData",[p]))?!0:o)&&$.jgrid.isFunction(ee[r.p.id].beforeInitData)?ee[r.p.id].beforeInitData.call(r,p):o)){for(var h,m,g,f,j,v,b,w,c=T,D=r,y=u,q=s,x=0,_=[],M="<td class='CaptionTD form-view-label "+z.content+"' width='"+U.labelswidth+"'></td><td class='DataTD form-view-data ui-helper-reset "+z.content+"'></td>",I="",B="<td class='CaptionTD form-view-label "+z.content+"'></td><td class='DataTD form-view-data "+z.content+"'></td>",R=["integer","number","currency"],k=0,C=0,F=1;F<=q;F++)I+=1===F?M:B;$(D.p.colModel).each(function(){(m=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden)||"right"!==this.align||(this.formatter&&-1!==$.inArray(this.formatter,R)?k=Math.max(k,parseInt(this.width,10)):C=Math.max(C,parseInt(this.width,10)))}),v=0!==k?k:0!==C?C:0,j=$(D).jqGrid("getInd",c),$(D.p.colModel).each(function(e){var t,i,a,d;h=this.name,m=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,f=m?"style='display:none'":"",w="boolean"!=typeof this.viewable||this.viewable,"cb"!==h&&"subgrid"!==h&&"rn"!==h&&w&&"sc"!==h&&(w=!1===j?"":h===D.p.ExpandColumn&&!0===D.p.treeGrid?$("td",D.rows[j]).eq(e).text():$("td",D.rows[j]).eq(e).html(),b="right"===this.align&&0!==v,t=$.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),i=parseInt(t.rowpos,10)||x+1,a=parseInt(2*(parseInt(t.colpos,10)||1),10),t.rowabove&&(d=$("<tr><td class='contentinfo' colspan='"+2*q+"'>"+t.rowcontent+"</td></tr>"),$(y).append(d),d[0].rp=i),0===(g=$(y).find("tr[rowpos="+i+"]")).length&&(g=$("<tr "+f+" rowpos='"+i+"'></tr>").addClass("FormData").attr("id","trv_"+h),$(g).append(I),$(y).append(g),g[0].rp=i),$("td",g[0]).eq(a-2).html("<b>"+(void 0===t.label?D.p.colNames[e]:t.label)+"</b>"),$("td",g[0]).eq(a-1).append("<span>"+w+"</span>").attr("id","v_"+h),b&&$("td",g[0]).eq(a-1).find("span").css({"text-align":"right",width:v+"px"}),_[x]=e,x++)}),0<x&&((c=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*q-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+c+"'/></td></tr>"))[0].rp=x+99,$(y).append(c));var G,e="rtl"===r.p.direction,o="<a id='"+(e?"nData":"pData")+"' class='fm-button "+z.button+"'><span class='"+z.icon_base+" "+N.icon_prev+"'></span></a>",c="<a id='"+(e?"pData":"nData")+"' class='fm-button "+z.button+"'><span class='"+z.icon_base+" "+N.icon_next+"'></span></a>",S="<a id='cData' class='fm-button "+z.button+"'>"+U.bClose+"</a>",S=Array.isArray(ee[r.p.id].buttons)?$.jgrid.buildButtons(ee[r.p.id].buttons,S,z):S,p=(0<l&&(G=[],$.each($(u)[0].rows,function(e,t){G[e]=t}),G.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(G,function(e,t){$("tbody",u).append(t)})),U.gbox="#gbox_"+$.jgrid.jqID(a),$("<div></div>").append(p).append("<table border='0' class='EditTable' id='"+n+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+U.labelswidth+"'>"+(e?c+o:o+c)+"</td><td class='EditButton'>"+S+"</td></tr></tbody></table>")),o=$(".ui-jqgrid").css("font-size")||"11px",c=($.jgrid.createModal(t,p,ee[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(r.p.id),$("#gview_"+$.jgrid.jqID(r.p.id))[0],null,{"font-size":o}),e&&($("#pData, #nData","#"+n+"_2").css("float","right"),$(".EditButton","#"+n+"_2").css("text-align","left")),U.viewPagerButtons||$("#pData, #nData","#"+n+"_2").hide(),$("#"+t.themodal).keydown(function(e){return 27===e.which?(ee[r.p.id].closeOnEscape&&$.jgrid.hideModal("#"+$.jgrid.jqID(t.themodal),{gb:U.gbox,jqm:U.jqModal,onClose:U.onClose,removemodal:ee[r.p.id].removemodal,formprop:!ee[r.p.id].recreateForm,form:ee[r.p.id].form}),!1):!0===U.navkeys[0]?e.which===U.navkeys[1]?($("#pData","#"+n+"_2").trigger("click"),!1):e.which===U.navkeys[2]?($("#nData","#"+n+"_2").trigger("click"),!1):void 0:void 0}),U.closeicon=$.extend([!0,"left",N.icon_close],U.closeicon),!0===U.closeicon[0]&&$("#cData","#"+n+"_2").addClass("right"===U.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+z.icon_base+" "+U.closeicon[2]+"'></span>"),$(r).triggerHandler("jqGridViewRowBeforeShowForm",[$("#"+d)]),$.jgrid.isFunction(U.beforeShowForm)&&U.beforeShowForm.call(r,$("#"+d)),$.jgrid.viewModal("#"+$.jgrid.jqID(t.themodal),{gbox:"#gbox_"+$.jgrid.jqID(a),jqm:U.jqModal,overlay:U.overlay,modal:U.modal,onHide:function(e){var t="rtl"===$("#gbox_"+$.jgrid.jqID(a)).attr("dir"),i=parseFloat($("#viewmod"+a)[0].style.width);$(r).data("viewProp",{top:parseFloat($(e.w).css("top")),left:t?$("#gbox_"+$.jgrid.jqID(a)).outerWidth()-i-parseFloat($(e.w).css("left"))+12:parseFloat($(e.w).css("left")),width:$(e.w).width(),height:$(e.w).height(),dataheight:$("#"+d).height(),datawidth:$("#"+d).width()}),e.w.remove(),e.o&&e.o.remove()}}),$(".fm-button:not(."+z.disabled+")","#"+n+"_2").hover(function(){$(this).addClass(z.hover)},function(){$(this).removeClass(z.hover)}),O(),$("#cData","#"+n+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(t.themodal),{gb:"#gbox_"+$.jgrid.jqID(a),jqm:U.jqModal,onClose:U.onClose,removemodal:ee[r.p.id].removemodal,formprop:!ee[r.p.id].recreateForm,form:ee[r.p.id].form}),!1}),$("#"+n+"_2").find("[data-index]").each(function(){var t=parseInt($(this).attr("data-index"),10);0<=t&&U.buttons[t].hasOwnProperty("click")&&$(this).on("click",function(e){U.buttons[t].click.call(r,$("#"+i)[0],ee[r.p.id],e)})}),$("#nData","#"+n+"_2").click(function(){$("#FormError","#"+n).hide();var e=A();return e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]&&($(r).triggerHandler("jqGridViewRowClickPgButtons",["next",$("#"+d),e[1][e[0]]]),$.jgrid.isFunction(U.onclickPgButtons)&&U.onclickPgButtons.call(r,"next",$("#"+d),e[1][e[0]]),P(e[1][e[0]+1],r),r.p.multiselect&&ee[r.p.id].viewselected||$(r).jqGrid("setSelection",e[1][e[0]+1]),$(r).triggerHandler("jqGridViewRowAfterClickPgButtons",["next",$("#"+d),e[1][e[0]+1]]),$.jgrid.isFunction(U.afterclickPgButtons)&&U.afterclickPgButtons.call(r,"next",$("#"+d),e[1][e[0]+1]),E(e[0]+1,e)),O(),!1}),$("#pData","#"+n+"_2").click(function(){$("#FormError","#"+n).hide();var e=A();return-1!==e[0]&&e[1][e[0]-1]&&($(r).triggerHandler("jqGridViewRowClickPgButtons",["prev",$("#"+d),e[1][e[0]]]),$.jgrid.isFunction(U.onclickPgButtons)&&U.onclickPgButtons.call(r,"prev",$("#"+d),e[1][e[0]]),P(e[1][e[0]-1],r),r.p.multiselect&&ee[r.p.id].viewselected||$(r).jqGrid("setSelection",e[1][e[0]-1]),$(r).triggerHandler("jqGridViewRowAfterClickPgButtons",["prev",$("#"+d),e[1][e[0]-1]]),$.jgrid.isFunction(U.afterclickPgButtons)&&U.afterclickPgButtons.call(r,"prev",$("#"+d),e[1][e[0]-1]),E(e[0]-1,e)),O(),!1}),A());E(c[0],c),this.refreshViewForm=function(e,t){!(t=void 0===t?!1:t)&&T!==e||P(e,this),t&&(T=e)}}}function O(){!0!==ee[r.p.id].closeOnEscape&&!0!==ee[r.p.id].navkeys[0]||setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(t.modalhead)).attr("tabindex","-1").focus()},0)}function P(e,t){var i,a,d,r=0,o=$(t).jqGrid("getInd",e,!0);o&&($("td",o).each(function(e){i=t.p.colModel[e].name,a=(!t.p.colModel[e].editrules||!0!==t.p.colModel[e].editrules.edithidden)&&!0===t.p.colModel[e].hidden,"cb"!==i&&"subgrid"!==i&&"rn"!==i&&"sc"!==i&&(d=i===t.p.ExpandColumn&&!0===t.p.treeGrid?$(this).text():$(this).html(),i=$.jgrid.jqID("v_"+i),$("#"+i+" span","#"+n).html(d),a&&$("#"+i,"#"+n).parents("tr").first().hide(),r++)}),0<r&&$("#id_g","#"+n).val(e))}function E(e,t){var i=t[1].length-1;0===e?$("#pData","#"+n+"_2").addClass(z.disabled):void 0!==t[1][e-1]&&$("#"+$.jgrid.jqID(t[1][e-1])).hasClass(z.disabled)?$("#pData",n+"_2").addClass(z.disabled):$("#pData","#"+n+"_2").removeClass(z.disabled),e===i?$("#nData","#"+n+"_2").addClass(z.disabled):void 0!==t[1][e+1]&&$("#"+$.jgrid.jqID(t[1][e+1])).hasClass(z.disabled)?$("#nData",n+"_2").addClass(z.disabled):$("#nData","#"+n+"_2").removeClass(z.disabled)}function A(){var e=$(r).jqGrid("getDataIDs"),t=$("#id_g","#"+n).val();if(r.p.multiselect&&ee[r.p.id].viewselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==$.inArray(e[a],r.p.selarrrow)&&i.push(e[a]);return[$.inArray(t,i),i]}return[$.inArray(t,e),e]}})},delGridRow:function(h,m){var e=$.jgrid.getRegional(this[0],"del"),t=this[0].p.styleUI,g=$.jgrid.styleUI[t].formedit,f=$.jgrid.styleUI[t].common;return m=$.extend(!0,{top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e,m||{}),ee[$(this)[0].p.id]=m,this.each(function(){var n=this;if(n.grid&&h){var s,a,d,l=n.p.id,c={},e=!0,p="DelTbl_"+$.jgrid.jqID(l),i="DelTbl_"+l,u={themodal:"delmod"+l,modalhead:"delhd"+l,modalcontent:"delcnt"+l,scrollelm:p};if(ee[n.p.id].styleUI=n.p.styleUI||"jQueryUI",Array.isArray(h)&&(h=h.join()),void 0!==$("#"+$.jgrid.jqID(u.themodal))[0]){if(!1===(e=(e=void 0===(e=$(n).triggerHandler("jqGridDelRowBeforeInitData",[$("#"+p)]))?!0:e)&&$.jgrid.isFunction(ee[n.p.id].beforeInitData)?ee[n.p.id].beforeInitData.call(n,$("#"+p)):e))return;$("#DelData>td","#"+p).text(h),$("#DelError","#"+p).hide(),!0===ee[n.p.id].processing&&(ee[n.p.id].processing=!1,$("#dData","#"+p).removeClass(f.active)),$(n).triggerHandler("jqGridDelRowBeforeShowForm",[$("#"+p)]),$.jgrid.isFunction(ee[n.p.id].beforeShowForm)&&ee[n.p.id].beforeShowForm.call(n,$("#"+p)),$.jgrid.viewModal("#"+$.jgrid.jqID(u.themodal),{gbox:"#gbox_"+$.jgrid.jqID(l),jqm:ee[n.p.id].jqModal,overlay:ee[n.p.id].overlay,modal:ee[n.p.id].modal}),$(n).triggerHandler("jqGridDelRowAfterShowForm",[$("#"+p)]),$.jgrid.isFunction(ee[n.p.id].afterShowForm)&&ee[n.p.id].afterShowForm.call(n,$("#"+p))}else{var t=isNaN(ee[n.p.id].dataheight)?ee[n.p.id].dataheight:ee[n.p.id].dataheight+"px",r=isNaN(m.datawidth)?m.datawidth:m.datawidth+"px",r="<div id='"+i+"' class='formdata' style='width:"+r+";overflow:auto;position:relative;height:"+t+";'>",t=(r=(r=(r=r+"<table class='DelTable'><tbody>"+("<tr id='DelError' style='display:none'><td class='"+f.error+"'></td></tr>"))+("<tr id='DelData' style='display:none'><td >"+h+"</td></tr>"))+('<tr><td class="delmsg" style="white-space:pre;">'+ee[n.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>")+"</tbody></table></div>","<a id='dData' class='fm-button "+f.button+"'>"+m.bSubmit+"</a>"),o="<a id='eData' class='fm-button "+f.button+"'>"+m.bCancel+"</a>",t=Array.isArray(ee[n.p.id].buttons)?$.jgrid.buildButtons(ee[n.p.id].buttons,t+o,f):t+o,o=$(".ui-jqgrid").css("font-size")||"11px";if(r+="<table class='EditTable ui-common-table' id='"+p+"_2'><tbody><tr><td><hr class='"+f.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+t+"</td></tr></tbody></table>",m.gbox="#gbox_"+$.jgrid.jqID(l),$.jgrid.createModal(u,r,ee[n.p.id],"#gview_"+$.jgrid.jqID(n.p.id),$("#gview_"+$.jgrid.jqID(n.p.id))[0],null,{"font-size":o}),$(".fm-button","#"+p+"_2").hover(function(){$(this).addClass(f.hover)},function(){$(this).removeClass(f.hover)}),m.delicon=$.extend([!0,"left",g.icon_del],ee[n.p.id].delicon),m.cancelicon=$.extend([!0,"left",g.icon_cancel],ee[n.p.id].cancelicon),!0===m.delicon[0]&&$("#dData","#"+p+"_2").addClass("right"===m.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+m.delicon[2]+"'></span>"),!0===m.cancelicon[0]&&$("#eData","#"+p+"_2").addClass("right"===m.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+m.cancelicon[2]+"'></span>"),$("#dData","#"+p+"_2").click(function(){var e,r=[!0,""],o=$("#DelData>td","#"+p).text();if(c={},void 0===(c=$(n).triggerHandler("jqGridDelRowClickSubmit",[ee[n.p.id],o]))&&$.jgrid.isFunction(ee[n.p.id].onclickSubmit)&&(c=ee[n.p.id].onclickSubmit.call(n,ee[n.p.id],o)||{}),(r=(r=void 0===(r=$(n).triggerHandler("jqGridDelRowBeforeSubmit",[o]))?[!0,"",""]:r)[0]&&$.jgrid.isFunction(ee[n.p.id].beforeSubmit)?ee[n.p.id].beforeSubmit.call(n,o):r)[0]&&!ee[n.p.id].processing){if(ee[n.p.id].processing=!0,a=n.p.prmNames,s=$.extend({},ee[n.p.id].delData,c),d=a.oper,s[d]=a.deloper,d=a.id,!(o=String(o).split(",")).length)return!1;for(e in o)o.hasOwnProperty(e)&&(o[e]=$.jgrid.stripPref(n.p.idPrefix,o[e]));s[d]=o.join(),$(this).addClass(f.active);var t,i=$.extend({url:ee[n.p.id].url||$(n).jqGrid("getGridParam","editurl"),type:ee[n.p.id].mtype,data:$.jgrid.isFunction(ee[n.p.id].serializeDelData)?ee[n.p.id].serializeDelData.call(n,s):s,success:function(e,t,i){var a,d;if($("#dData","#"+p+"_2").removeClass(f.active),300<=i.status&&304!==i.status?(r[0]=!1,r[1]=$(n).triggerHandler("jqGridDelRowErrorTextFormat",[i]),$.jgrid.isFunction(ee[n.p.id].errorTextFormat)&&(r[1]=ee[n.p.id].errorTextFormat.call(n,i)),void 0===r[1]&&(r[1]=t+" Status: '"+i.statusText+"'. Error code: "+i.status)):(r=void 0===(r=$(n).triggerHandler("jqGridDelRowAfterSubmit",[i,s]))?[!0,"",""]:r)[0]&&$.jgrid.isFunction(ee[n.p.id].afterSubmit)&&(r=ee[n.p.id].afterSubmit.call(n,i,s)),!1===r[0])$("#DelError>td","#"+p).html(r[1]),$("#DelError","#"+p).show();else{if(ee[n.p.id].reloadAfterSubmit&&"local"!==n.p.datatype)$(n).trigger("reloadGrid");else{if(!0===n.p.treeGrid)try{$(n).jqGrid("delTreeNode",n.p.idPrefix+o[0],!0)}catch(e){}else for(a=0;a<o.length;a++)$(n).jqGrid("delRowData",n.p.idPrefix+o[a]);n.p.selrow=null,n.p.selarrrow=[]}($.jgrid.isFunction(ee[n.p.id].afterComplete)||Object.prototype.hasOwnProperty.call($._data($(n)[0],"events"),"jqGridDelRowAfterComplete"))&&(d=i,setTimeout(function(){$(n).triggerHandler("jqGridDelRowAfterComplete",[d,s]);try{ee[n.p.id].afterComplete.call(n,d,s)}catch(e){}},500))}ee[n.p.id].processing=!1,r[0]&&$.jgrid.hideModal("#"+$.jgrid.jqID(u.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:m.jqModal,onClose:ee[n.p.id].onClose})}},$.jgrid.ajaxOptions,ee[n.p.id].ajaxDelOptions);i.url||ee[n.p.id].useDataProxy||($.jgrid.isFunction(n.p.dataProxy)?ee[n.p.id].useDataProxy=!0:(r[0]=!1,r[1]+=" "+$.jgrid.getRegional(n,"errors.nourl"))),r[0]&&(ee[n.p.id].useDataProxy?!1===(t=void 0===(t=n.p.dataProxy.call(n,i,"del_"+n.p.id))?[!0,""]:t)[0]?(r[0]=!1,r[1]=t[1]||"Error deleting the selected row!"):$.jgrid.hideModal("#"+$.jgrid.jqID(u.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:m.jqModal,onClose:ee[n.p.id].onClose}):"clientArray"===i.url?(s=i.data,i.success({status:200,statusText:""},"")):"storage"===i.url?$(n).jqGrid("deleteStorageRecord",o).then(function(e){"complete"===e.type&&i.success(o,"",{status:200,statusText:""})}).catch(function(e){$.jgrid.info_dialog("Error",e.target.error.name+" : "+e.target.error.message,"Close")}):$.ajax(i))}return!1===r[0]&&($("#DelError>td","#"+p).html(r[1]),$("#DelError","#"+p).show()),!1}),$("#eData","#"+p+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(u.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:ee[n.p.id].jqModal,onClose:ee[n.p.id].onClose}),!1}),$("#"+p+"_2").find("[data-index]").each(function(){var t=parseInt($(this).attr("data-index"),10);0<=t&&m.buttons[t].hasOwnProperty("click")&&$(this).on("click",function(e){m.buttons[t].click.call(n,$("#"+i)[0],ee[n.p.id],e)})}),!1===(e=(e=void 0===(e=$(n).triggerHandler("jqGridDelRowBeforeInitData",[$("#"+p)]))?!0:e)&&$.jgrid.isFunction(ee[n.p.id].beforeInitData)?ee[n.p.id].beforeInitData.call(n,$("#"+p)):e))return;$(n).triggerHandler("jqGridDelRowBeforeShowForm",[$("#"+p)]),$.jgrid.isFunction(ee[n.p.id].beforeShowForm)&&ee[n.p.id].beforeShowForm.call(n,$("#"+p)),$.jgrid.viewModal("#"+$.jgrid.jqID(u.themodal),{gbox:"#gbox_"+$.jgrid.jqID(l),jqm:ee[n.p.id].jqModal,overlay:ee[n.p.id].overlay,modal:ee[n.p.id].modal}),$(n).triggerHandler("jqGridDelRowAfterShowForm",[$("#"+p)]),$.jgrid.isFunction(ee[n.p.id].afterShowForm)&&ee[n.p.id].afterShowForm.call(n,$("#"+p))}!0===ee[n.p.id].closeOnEscape&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(u.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(m,g,f,j,v,b,w){var D=$.jgrid.getRegional(this[0],"nav"),y=this[0].p.styleUI,e=$.jgrid.styleUI[y].navigator,q=$.jgrid.styleUI[y].common;return g=$.extend({edit:!0,editicon:e.icon_edit_nav,add:!0,addicon:e.icon_add_nav,del:!0,delicon:e.icon_del_nav,search:!0,searchicon:e.icon_search_nav,refresh:!0,refreshicon:e.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:e.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},D,g||{}),this.each(function(){if(!this.p.navGrid){var t,i=this;if(i.grid&&"string"==typeof m){$(i).data("navGrid")||$(i).data("navGrid",g),t=$(i).data("navGrid"),(t=i.p.force_regional?$.extend(t,D):t).alerttop||t.alertleft||((e=$.jgrid.findPos(this))[0]=Math.round(e[0]),e[1]=Math.round(e[1]),0===(a=isNaN(this.p.height)?$(i.grid.bDiv).height():this.p.height)&&(a=200),t.alertleft=e[0]+this.p.width/2-parseInt(t.alertwidth,10)/2,t.alerttop=e[1]+a/2-25);var e,a,d,r=function(){$.jgrid.info_dialog(t.alertcap,"<div>"+t.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>","",{jqModal:!0,drag:!0,resize:!0,caption:t.alertcap,width:t.alertwidth,height:t.alertheight,top:t.alerttop,left:t.alertleft,closeOnEscape:t.closeOnEscape,styleUI:i.p.styleUI,zIndex:t.alertzIndex})},o=1,n=function(){$(this).hasClass(q.disabled)||$(this).addClass(q.hover)},s=function(){$(this).removeClass(q.hover)};for(t.cloneToTop&&i.p.toppager&&(o=2),d=0;d<o;d++){var l,c,p,u=$("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),h="<td class='ui-pg-button "+q.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>";0===d?(0===(c=m).indexOf("#")&&(c=c.substring(1),c="#"+$.jgrid.jqID(c)),p=i.p.id,c===i.p.toppager&&(p+="_top",o=1)):(c=i.p.toppager,p=i.p.id+"_top"),"rtl"===i.p.direction&&$(u).attr("dir","rtl").css("float","right"),j=j||{},t.add&&(l=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(l).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.addicon+"'></span>"+t.addtext+"</div>"),$("tr",u).append(l),$(l,u).attr({title:t.addtitle||"",id:j.id||"add_"+p}).click(function(){return $(this).hasClass(q.disabled)||($.jgrid.setSelNavIndex(i,this),$.jgrid.isFunction(t.addfunc)?t.addfunc.call(i):$(i).jqGrid("editGridRow","new",j)),!1}).hover(n,s),l=null),f=f||{},t.edit&&(l=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(l).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.editicon+"'></span>"+t.edittext+"</div>"),$("tr",u).append(l),$(l,u).attr({title:t.edittitle||"",id:f.id||"edit_"+p}).click(function(){var e;return $(this).hasClass(q.disabled)||((e=i.p.selrow)?($.jgrid.setSelNavIndex(i,this),$.jgrid.isFunction(t.editfunc)?t.editfunc.call(i,e):$(i).jqGrid("editGridRow",e,f)):(r(),$("#jqg_alrt").focus())),!1}).hover(n,s),l=null),w=w||{},t.view&&(l=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(l).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.viewicon+"'></span>"+t.viewtext+"</div>"),$("tr",u).append(l),$(l,u).attr({title:t.viewtitle||"",id:w.id||"view_"+p}).click(function(){var e;return $(this).hasClass(q.disabled)||((e=i.p.selrow)?($.jgrid.setSelNavIndex(i,this),$.jgrid.isFunction(t.viewfunc)?t.viewfunc.call(i,e):$(i).jqGrid("viewGridRow",e,w)):(r(),$("#jqg_alrt").focus())),!1}).hover(n,s),l=null),v=v||{},t.del&&(l=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(l).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.delicon+"'></span>"+t.deltext+"</div>"),$("tr",u).append(l),$(l,u).attr({title:t.deltitle||"",id:v.id||"del_"+p}).click(function(){var e;return $(this).hasClass(q.disabled)||(i.p.multiselect?0===(e=i.p.selarrrow).length&&(e=null):e=i.p.selrow,e?($.jgrid.setSelNavIndex(i,this),$.jgrid.isFunction(t.delfunc)?t.delfunc.call(i,e):$(i).jqGrid("delGridRow",e,v)):r()),!1}).hover(n,s),l=null),(t.add||t.edit||t.del||t.view)&&$("tr",u).append(h),b=b||{},t.search&&(l=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(l).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.searchicon+"'></span>"+t.searchtext+"</div>"),$("tr",u).append(l),$(l,u).attr({title:t.searchtitle||"",id:b.id||"search_"+p}).click(function(){return $(this).hasClass(q.disabled)||($.jgrid.setSelNavIndex(i,this),$.jgrid.isFunction(t.searchfunc)?t.searchfunc.call(i,b):$(i).jqGrid("searchGrid",b)),!1}).hover(n,s),b.showOnLoad&&!0===b.showOnLoad&&$(l,u).click(),l=null),t.refresh&&(l=$("<td class='ui-pg-button "+q.cornerall+"'></td>"),$(l).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.refreshicon+"'></span>"+t.refreshtext+"</div>"),$("tr",u).append(l),$(l,u).attr({title:t.refreshtitle||"",id:"refresh_"+p}).click(function(){if(!$(this).hasClass(q.disabled)){$.jgrid.isFunction(t.beforeRefresh)&&t.beforeRefresh.call(i),i.p.search=!1,i.p.resetsearch=!0;try{if("currentfilter"!==t.refreshstate){var e=i.p.id;i.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}$.jgrid.isFunction(i.clearToolbar)&&i.clearToolbar.call(i,!1)}}catch(e){}switch(t.refreshstate){case"firstpage":$(i).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(i).trigger("reloadGrid",[{current:!0}])}$.jgrid.isFunction(t.afterRefresh)&&t.afterRefresh.call(i),$.jgrid.setSelNavIndex(i,this)}return!1}).hover(n,s),l=null),h=$(".ui-jqgrid").css("font-size")||"11px",$("body").append("<div id='testpg2' class='ui-jqgrid "+$.jgrid.styleUI[y].base.entrieBox+"' style='font-size:"+h+";visibility:hidden;' ></div>"),h=$(u).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),i.p._nvtd&&(t.dropmenu?(u=null,$(i).jqGrid("_buildNavMenu",c,p,$.extend(g,{ainfo:r}),f,j,v,b,w)):h>i.p._nvtd[0]?(i.p.responsive?(u=null,$(i).jqGrid("_buildNavMenu",c,p,$.extend(g,{ainfo:r}),f,j,v,b,w)):$(c+"_"+t.position,c).append(u).width(h),i.p._nvtd[0]=h):$(c+"_"+t.position,c).append(u),i.p._nvtd[1]=h),i.p.navGrid=!0}i.p.storeNavOptions&&(i.p.navOptions=t,i.p.editOptions=f,i.p.addOptions=j,i.p.delOptions=v,i.p.searchOptions=b,i.p.viewOptions=w,i.p.navButtons=[])}}})},navButtonAdd:function(s,l){var c=this[0].p.styleUI,e=$.jgrid.styleUI[c].navigator;return l=$.extend({caption:"newButton",title:"",buttonicon:e.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},l||{}),this.each(function(){var t,i,e,a,d,r,o,n;this.grid&&"string"==typeof s&&(0===s.indexOf("#")&&(s=s.substring(1)),s="#"+$.jgrid.jqID(s),n=$(".navtable",s)[0],i=$.jgrid.styleUI[c].common.disabled,e=$.jgrid.styleUI[c].common.hover,a=$.jgrid.styleUI[c].common.cornerall,r=$.jgrid.styleUI[c].common.icon_base,(t=this).p.storeNavOptions&&!l.internal&&t.p.navButtons.push([s,l]),n?l.id&&void 0!==$("#"+$.jgrid.jqID(l.id),n)[0]||(o=$("<td></td>"),"NONE"===l.buttonicon.toString().toUpperCase()?$(o).addClass("ui-pg-button "+a).append("<div class='ui-pg-div'>"+l.caption+"</div>"):$(o).addClass("ui-pg-button "+a).append("<div class='ui-pg-div'><span class='"+r+" "+l.buttonicon+"'></span>"+l.caption+"</div>"),l.id&&$(o).attr("id",l.id),"first"!==l.position||0===n.rows[0].cells.length?$("tr",n).append(o):$("tr td",n).eq(0).before(o),$(o,n).attr("title",l.title||"").click(function(e){return $(this).hasClass(i)||($.jgrid.setSelNavIndex(t,this),$.jgrid.isFunction(l.onClickButton)&&l.onClickButton.call(t,e)),!1}).hover(function(){$(this).hasClass(i)||$(this).addClass(e)},function(){$(this).removeClass(e)})):(n=$(".dropdownmenu",s)[0])&&(d=$(n).val(),r=l.id||$.jgrid.randId(),o=$('<li class="ui-menu-item" role="presentation"><a class="'+a+' g-menu-item" tabindex="0" role="menuitem" id="'+r+'">'+(l.caption||l.title)+"</a></li>"),d&&("first"===l.position?$("#"+d).prepend(o):$("#"+d).append(o),$(o).on("click",function(e){return $(this).hasClass(i)||($("#"+d).hide(),$.jgrid.isFunction(l.onClickButton)&&l.onClickButton.call(t,e)),!1}).find("a").hover(function(){$(this).hasClass(i)||$(this).addClass(e)},function(){$(this).removeClass(e)}))))})},navSeparatorAdd:function(i,a){var e=this[0].p.styleUI,d=$.jgrid.styleUI[e].common;return a=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},a||{}),this.each(function(){var e,t;this.grid&&("string"==typeof i&&0!==i.indexOf("#")&&(i="#"+$.jgrid.jqID(i)),t=$(".navtable",i)[0],this.p.storeNavOptions&&this.p.navButtons.push([i,a]),t?(e="<td class='ui-pg-button "+d.disabled+"' style='width:4px;'><span class='"+a.sepclass+"'></span>"+a.sepcontent+"</td>","first"!==a.position||0===t.rows[0].cells.length?$("tr",t).append(e):$("tr td",t).eq(0).before(e)):(t=$(".dropdownmenu",i)[0],e="<li class='ui-menu-item "+d.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",t&&(t=$(t).val())&&("first"===a.position?$("#"+t).prepend(e):$("#"+t).append(e))))})},_buildNavMenu:function(l,c,p,u,h,m,g,f){return this.each(function(){var e,t,i,a=this,d=$.jgrid.getRegional(a,"nav"),r=a.p.styleUI,o=$.jgrid.styleUI[r].filter,n=$.jgrid.styleUI[r].common,s="form_menu_"+$.jgrid.randId(),r=p.navButtonText||d.selectcaption||"Actions",d="<button class='dropdownmenu "+n.button+"' value='"+s+"'>"+r+"</button>";$(l+"_"+p.position,l).append(d);r=$(".ui-jqgrid").css("font-size")||"11px",i=$('<ul id="'+s+'" class="ui-nav-menu modal-content ui-menu column-menu jqgrid-column-menu '+n.shadow+'" role="menu" tabindex="0" style="display:none;font-size:'+r+'"></ul>'),p.add&&(e=(h=h||{}).id||"add_"+c,t=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(p.addtext.trim()||p.addtitle)+"</a></li>").click(function(){return $(this).hasClass(n.disabled)||($.jgrid.isFunction(p.addfunc)?p.addfunc.call(a):$(a).jqGrid("editGridRow","new",h),$(i).hide()),!1}),$(i).append(t)),p.edit&&(e=(u=u||{}).id||"edit_"+c,t=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(p.edittext.trim()||p.edittitle)+"</a></li>").click(function(){var e;return $(this).hasClass(n.disabled)||((e=a.p.selrow)?$.jgrid.isFunction(p.editfunc)?p.editfunc.call(a,e):$(a).jqGrid("editGridRow",e,u):(p.ainfo(),$("#jqg_alrt").focus()),$(i).hide()),!1}),$(i).append(t)),p.view&&(e=(f=f||{}).id||"view_"+c,t=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(p.viewtext.trim()||p.viewtitle)+"</a></li>").click(function(){var e;return $(this).hasClass(n.disabled)||((e=a.p.selrow)?$.jgrid.isFunction(p.editfunc)?p.viewfunc.call(a,e):$(a).jqGrid("viewGridRow",e,f):(p.ainfo(),$("#jqg_alrt").focus()),$(i).hide()),!1}),$(i).append(t)),p.del&&(e=(m=m||{}).id||"del_"+c,t=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(p.deltext.trim()||p.deltitle)+"</a></li>").click(function(){var e;return $(this).hasClass(n.disabled)||(a.p.multiselect?0===(e=a.p.selarrrow).length&&(e=null):e=a.p.selrow,e?$.jgrid.isFunction(p.delfunc)?p.delfunc.call(a,e):$(a).jqGrid("delGridRow",e,m):p.ainfo(),$(i).hide()),!1}),$(i).append(t)),(p.add||p.edit||p.del||p.view)&&$(i).append("<li class='ui-menu-item "+n.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>"),p.search&&(e=(g=g||{}).id||"search_"+c,t=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(p.searchtext.trim()||p.searchtitle)+"</a></li>").click(function(){return $(this).hasClass(n.disabled)||($.jgrid.isFunction(p.searchfunc)?p.searchfunc.call(a,g):$(a).jqGrid("searchGrid",g),$(i).hide()),!1}),$(i).append(t),g.showOnLoad&&!0===g.showOnLoad&&$(t).click()),p.refresh&&(e=g.id||"search_"+c,t=$('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(p.refreshtext||p.refreshtitle)+"</a></li>").click(function(){if(!$(this).hasClass(n.disabled)){$.jgrid.isFunction(p.beforeRefresh)&&p.beforeRefresh.call(a),a.p.search=!1,a.p.resetsearch=!0;try{if("currentfilter"!==p.refreshstate){var e=a.p.id;a.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}$.jgrid.isFunction(a.clearToolbar)&&a.clearToolbar.call(a,!1)}}catch(e){}switch(p.refreshstate){case"firstpage":$(a).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(a).trigger("reloadGrid",[{current:!0}])}$.jgrid.isFunction(p.afterRefresh)&&p.afterRefresh.call(a),$(i).hide()}return!1}),$(i).append(t)),$(i).hide(),$("body").append(i),$("#"+s).addClass("ui-menu "+o.menu_widget),$("#"+s+" > li > a").hover(function(){$(this).addClass(n.hover)},function(){$(this).removeClass(n.hover)}),$(".dropdownmenu",l+"_"+p.position).on("click",function(e){var t=$(this).offset(),i=t.left,t=parseInt(t.top),a=$(this).val();$("#"+a).show().css({top:t-($("#"+a).height()+35)+"px",left:i+"px"}),e.stopPropagation()}),$("body").on("click",function(e){$(e.target).hasClass("dropdownmenu")||$("#"+s).hide()})})},GridToForm:function(a,d){return this.each(function(){var e,t=this;if(t.grid){var i=$(t).jqGrid("getRowData",a);if(i)for(e in i)i.hasOwnProperty(e)&&($("[name="+$.jgrid.jqID(e)+"]",d).is("input:radio")||$("[name="+$.jgrid.jqID(e)+"]",d).is("input:checkbox")?$("[name="+$.jgrid.jqID(e)+"]",d).each(function(){$(this).val()==i[e]?$(this)[t.p.useProp?"prop":"attr"]("checked",!0):$(this)[t.p.useProp?"prop":"attr"]("checked",!1)}):$("[name="+$.jgrid.jqID(e)+"]",d).val(i[e]))}})},FormToGrid:function(t,a,d,r){return this.each(function(){var e,i;this.grid&&(d=d||"set",r=r||"first",e=$(a).serializeArray(),i={},$.each(e,function(e,t){i[t.name]=t.value}),"add"===d?$(this).jqGrid("addRowData",t,i,r):"set"===d&&$(this).jqGrid("setRowData",t,i))})}})});